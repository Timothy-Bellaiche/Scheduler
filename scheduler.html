<head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="stylesheets/style.css"/>
        <title>Make an easy Schedule</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>
    <div class="banner">Scheduler</div>
    <div class="container">
      <!--<div class="search_box">{{>searchBox}}</div><div style="display: inline-block; margin-left: 10px; color: #ABABAB;" class="entypo-search"></div>-->
      <div style="display: inline-block; margin-left: 10px; color: #ABABAB;" class="entypo-search"></div>
      {{>searchBox}}
        <!--<ul>-->
          <!--{{#each courses}}-->
            <!--{{>coursedesc}}-->
          <!--{{/each}}-->
        <!--</ul>-->
    <div class="schedule">
        <table class="edt" cellspacing="0">
        <thead>
          <tr class="odd">
            <td><br><br></td>
            <td class="day">MONDAY</td>
            <td class="day">TUESDAY</td>
            <td class="day">WEDNESDAY</td>
            <td class="day">THURSDAY</td>
            <td class="day">FRIDAY</td>
            <td class="day">SATURDAY</td>
            <td class="day">SUNDAY</td>
          </tr>
        </thead>
        <tbody>
          <tr class="even">
            <td class="free hour"><!-- 1<br> -->8:10 - 9:00</td>
            <!-- <td class="class course" id="mon1">An introduction to Taiwanese culture and history<br>33100</td> -->
            <td class="free" id="mon8"></td>
            <td class="free" id="tue8"></td>
            <td class="free" id="wed8"></td>
            <td class="free" id="thu8"></td>
            <td class="free" id="fri8"></td>
            <td class="free" id="sat8"></td>
            <td class="free" id="sun8"></td>
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- 2<br> -->9:10 - 10:00</td>
            <!-- <td class="class course" id="mon2">An introduction to Taiwanese culture and history<br>33100</td> -->
            <td class="free" id="mon9"></td>
            <td class="free" id="tue9"></td>
            <td class="free" id="wed9"></td>
            <td class="free" id="thu9"></td>
            <td class="free" id="fri9"></td>
            <td class="free" id="sat9"></td>
            <td class="free" id="sun9"></td>
          </tr>
          <tr class="even">
            <td class="free hour"><!-- 3<br> -->10:10 - 11:00</td>
            <td class="free" id="mon10"></td>
            <td class="free" id="tue10"></td>
            <td class="free" id="wed10"></td>
            <td class="free" id="thu10"></td>
            <td class="free" id="fri10"></td>
            <td class="free" id="sat10"></td>
            <td class="free" id="sun10"></td>
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- 4</br> -->11:10 - 12:00</td>
            <td class="free" id="mon11"></td>
            <td class="free" id="tue11"></td>
            <td class="free" id="wed11"></td>
            <td class="free" id="thu11"></td>
            <td class="free" id="fri11"></td>
            <td class="free" id="sat11"></td>
            <td class="free" id="sun11"></td>
          </tr>
          <tr class="even">
            <td class="free hour"><!-- C<br> -->12:10 - 13:00</td>
            <td class="free" id="mon12"></td>
            <td class="free" id="tue12"></td>
            <td class="free" id="wed12"></td>
            <td class="free" id="thu12"></td>
            <td class="free" id="fri12"></td>
            <td class="free" id="sat12"></td>
            <td class="free" id="sun12"></td>
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- D<br> -->13:10 - 14:00</td>
            <td class="free" id="mon13"></td>
            <td class="free" id="tue13"></td>
            <td class="free" id="wed13"></td>
            <td class="free" id="thu13"></td>
            <td class="free" id="fri13"></td>
            <td class="free" id="sat13"></td>
            <td class="free" id="sun13"></td>
          </tr>
          <tr class="even">
            <td class="free hour"><!-- 5<br> -->14:10 - 15:00</td>
            <td class="free" id="mon14"></td>
            <td class="free" id="tue14"></td>
            <td class="free" id="wed14"></td>
            <td class="free" id="thu14"></td>
            <td class="free" id="fri14"></td>
            <td class="free" id="sat14"></td>
            <td class="free" id="sun14"></td>
            <!-- <td class="class course" id="wed7">How to exploit innovativeness<br>24202</td> -->
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- 6<br> -->15:10 - 16:00</td>
            <td class="free" id="mon15"></td>
            <td class="free" id="tue15"></td>
            <td class="free" id="wed15"></td>
            <td class="free" id="thu15"></td>
            <td class="free" id="fri15"></td>
            <td class="free" id="sat15"></td>
            <td class="free" id="sun15"></td>
<!--             <td class="class course" id="wed8">How to exploit innovativeness<br>24202</td>-->
            </tr>
          <tr class="even">
            <td class="free hour"><!-- 7<br> -->16:10 - 17:00</td>
            <td class="free" id="mon16"></td>
            <td class="free" id="tue16"></td>
            <td class="free" id="wed16"></td>
            <td class="free" id="thu16"></td>
            <td class="free" id="fri16"></td>
            <td class="free" id="sat16"></td>
            <td class="free" id="sun16"></td>
            <!-- <td class="class course" id="wed9">How to exploit innovativeness<br>24202</td> -->
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- 8<br> -->17:10 - 18:00</td>
            <td class="free" id="mon17"></td>
            <td class="free" id="tue17"></td>
            <td class="free" id="wed17"></td>
            <td class="free" id="thu17"></td>
            <td class="free" id="fri17"></td>
            <td class="free" id="sat17"></td>
            <td class="free" id="sun17"></td>
          </tr>
          <tr class="even">
            <td class="free hour"><!-- E<br> -->18:10 - 19:00</td>
            <td class="free" id="mon18"></td>
            <td class="free" id="tue18"></td>
            <td class="free" id="wed18"></td>
            <td class="free" id="thu18"></td>
            <td class="free" id="fri18"></td>
            <td class="free" id="sat18"></td>
            <td class="free" id="sun18"></td>
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- F<br> -->19:10 - 20:00</td>
            <td class="free" id="mon19"></td>
            <td class="free" id="tue19"></td>
            <td class="free" id="wed19"></td>
            <td class="free" id="thu19"></td>
            <td class="free" id="fri19"></td>
            <td class="free" id="sat19"></td>
            <td class="free" id="sun19"></td>
            <!-- <td class="class course" id="fri12">IT for networked organizations<br>12413<div class="details timetable">NOM DU COURS NOM DU PROF SALLE CREDITS HEURE FASICULE</div></td> -->
          </tr>
          <tr class="even">
            <td class="free hour"><!-- G<br> -->20:10 - 21:00</td>
            <td class="free" id="mon20"></td>
            <td class="free" id="tue20"></td>
            <td class="free" id="wed20"></td>
            <td class="free" id="thu20"></td>
            <td class="free" id="fri20"></td>
            <td class="free" id="sat20"></td>
            <td class="free" id="sun20"></td>
            <!-- <td class="class course" id="fri13">IT for networked organizations<br>12413<div class="details timetable">NOM DU COURS NOM DU PROF SALLE CREDITS HEURE FASICULE</div></td> -->
          </tr>
          <tr class="odd">
            <td class="free hour"><!-- H<br> -->21:10 - 22:00</td>
            <td class="free" id="mon21"></td>
            <td class="free" id="tue21"></td>
            <td class="free" id="wed21"></td>
            <td class="free" id="thu21"></td>
            <td class="free" id="fri21"></td>
            <!--<td class="class course" id="fri21">IT for networked organizations<br>12413-->
                <!--<div class="details timetable">NOM DU COURS NOM DU PROF SALLE CREDITS HEURE FASICULE</div></td>-->
            <td class="free" id="sat21"></td>
            <td class="free" id="sun21"></td>
            
          </tr>
        </tbody>
      </table>
      </div></div>
      <div class="selected_course_list">
            <div class="course_list_title">Selected courses</div>
                <ul class="course_list" id="course_list">
                    <!-- {{#each courseschecked}}
                      {{>coursescheckeddesc}}
                    {{/each}} -->
                    <!--<li class="course_item course">IT for networked organizations<div class="details non_timetable">NOM DU COURS NOM DU PROF SALLE CREDITS HEURE FASICULE</div></li>-->
                    <li class="total_credits">TOTAL CREDITS: to-do</li>
                    <li class="total_hours">TOTAL HOURS/WEEK: to-do</li>
                    <!--<li class="total_credits">BACK-END BY DAMIEN, FRONT-END BY TIMOTHY, BUSINESS/MARKETING BY MARKUS</li>-->
                </ul>
            </div>
    <script>
        function functionToggle(element,start,middle,end,coursename,classroom,prof) {

          if (element.checked) {
            var details = coursename + " " + classroom + " " + prof;
            var borderstyle = "2px solid white";

            function toggleAdd(position) {
              var descriptionBox = document.createElement('div');
              descriptionBox.className = "details timetable";
              descriptionBox.innerHTML = details;
              document.getElementById(position).className = "class course";
              document.getElementById(position).style.borderLeft = borderstyle;
              document.getElementById(position).style.borderRight = borderstyle;
              if (position == start) {
                document.getElementById(position).style.borderTop = borderstyle;
              }
              else if (position == end) {
                document.getElementById(position).style.borderBottom = borderstyle;
              }
              else {
                document.getElementById(position).innerHTML = coursename+"\n"+classroom;
              }
              document.getElementById(position).appendChild(descriptionBox);
            }

            function listAdd() {
             var descriptionBox = document.createElement('div');
             descriptionBox.className = "details non_timetable";
             descriptionBox.innerHTML = details;
             var newCourse = document.createElement('li');
             newCourse.className = "course_item course";
             newCourse.innerHTML = coursename;
             newCourse.appendChild(descriptionBox);
             document.getElementById('course_list').insertBefore(newCourse, document.getElementById('course_list').firstChild);
            }

            toggleAdd(start);
            toggleAdd(middle);
            toggleAdd(end);
            listAdd(coursename);

            $(".course").mouseover(function() {
              $(this).children(".details").show();
              }).mouseout(function() {
              $(this).children(".details").hide();
              });
            }

          else {
            function toggleRemove(position) {
              document.getElementById(position).className = "free";
              document.getElementById(position).removeChild(document.getElementById(position).firstChild);
              document.getElementById(position).innerHTML = "";
              document.getElementById(position).style.borderLeft = "";
              document.getElementById(position).style.borderRight = "";
              if (position == start) {
                document.getElementById(position).style.borderTop = "";
              }
              else if (position == end) {
                document.getElementById(position).style.borderBottom = "";
              }
              else {}
            }

            function listRemove() {
              var listElement = document.getElementsByClassName("course_item");
                for (var i=0; currentListElement=listElement[i]; i++) {
                  if (currentListElement.innerHTML == coursename) {
                    currentListElement.parentNode.removeChild(currentListElement);
                    break ;}
                  else {}
                }
              } 
            toggleRemove(start);
            toggleRemove(middle);
            toggleRemove(end);
            listRemove();

          }
        }
    </script>
</body>

<template name="coursedesc">
<li>{{courseName}}, {{prof}} (every {{day}}, starts at {{startTime}}:10, ends at {{trueEndTime}}:00) <input type="checkbox" checked="{{checked}}" class="toggle-checked" onclick="functionToggle(this,'{{day}}{{startTime}}','{{day}}{{middleTime}}','{{day}}{{endTime}}','{{courseName}}','{{classroom}}','{{prof}}')" /></li>
</template>

<template name="coursescheckeddesc">
<li class="course_item course">{{courseName}}<div class="details non_timetable">{{courseName}}, Prof: {{prof}} (every {{day}}, starts at {{startTime}}:10, ends at {{trueEndTime}}:10). Classroom: {{classroom}}</div><input type="checkbox" checked="{{checked}}" class="toggle-checked" onclick="functionToggle(this,'{{day}}{{startTime}}','{{day}}{{middleTime}}','{{day}}{{endTime}}','{{courseName}}','{{classroom}}','{{prof}}')" /></li>
</template>

<template name="searchBox">
    {{> esInput index="courses" placeholder="Search by course name" }}

    <br>
    (example: IT for Networked Organizations, Management Information Systems...)

    {{#esEach index="courses"}}
        {{> coursedesc}}
    {{/esEach}}

    {{#ifEsHasNoResults index="courses"}}
        <div class="no-results">No results found!</div>
    {{/ifEsHasNoResults}}
</template>
